{% extends "base.html" %}
{% load static %}

{% block title %}
    Profile Page
{% endblock %}

{% block style %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/profile_list.css' %}">
{% endblock %}

{% block content %}

    <!-- Header Custom (if different from base.html) -->
    <div class="headdiv">
        <div>
            <a id="logoimglink" href="{% url 'welcome' %}">
                <img
                    src="{% static 'img/logo1.png' %}"
                    alt="Logo"
                    style="width: 150px; height: 69px; border-radius: 40%; padding: 0px; margin-top: 20px"
                    class="logoimg"
                />
            </a>
        </div>
        <nav>
            <div class="linkpadg1 linkpadg">
                <a href="{% url 'logout' %}"><a href="{% url 'welcome' %}">Home and Logout</a></a>
            </div>
            <div class="linkpadg2 linkpadg">
                <a href="{% url 'movie-list' %}">Movies List</a>
            </div>
            <div class="linkpadg3 linkpadg">
                <a href="{% url 'profile' %}">User Profile</a>
            </div>
        </nav>
    </div>

    <!-- Profile Content -->
<div class="profile-container">
    <h2>Welcome, {{ user.username }}</h2>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <hr>

    <h3>Your Bookings</h3>
    {% if bookings %}
    <table border="1" cellpadding="8" cellspacing="0">
        <tr>
            <th>Movie</th>
            <th>Seats</th>
        </tr>
        {% for booking in bookings %}
        <tr>
            <td>{{ booking.movie.title }}</td>
            <td>{{ booking.seats }}</td>
            <td>
                <form method="post" action="{% url 'booking-delete' booking.pk %}" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn-delete">Delete</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% else %}
        <p>No bookings yet.</p>
    {% endif %}

    <br>
    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>
</div>

{% endblock %}